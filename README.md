# PI_Luca_Killian



## What is it about ?

This multiphysics integrated computational project is focused on computational fluid dynamics in continuum mechanic and more precisely focused on the **Smoothed-particle hydrodynamics** (so-called SPH method) which is computed in c++ language. This method has been created in the 19's (1977 by Gingold, Monaghan and Lucy) and is thus relatively new. Hence, one specificaly focuses on microfluidic applications (such as surface tensions, adhesions) in order to compare our results to some well known examples to assess the accuracy of our models.

## How to run the code ?

### Before launching simulation
Once all files are downloaded, few things have to be considered before running simulations. Indeed, this c++ code is compiled using CMake (to ease the use of makefiles) and Ninja (to ease the access to files/folders' name) and thus some variables have to be defined beforehand.

Windows : In the upper path of the folder **PI_LUCA_KILLIAN** write in a terminal
    ```envs\windows.cmd```

which will first set the location of mingw compiler/zlib/cmake; create mandatory local environment variables and immediatly shift your path to the desired location (in the build folder).

<u>Note</u> : to run this code correctly, you need to download the main folder in this precise path:

```C:\Users\Username\pi_luca_killian\src\build>```

### Define simulation
In the **.json** file, several parameters can be adjusted:
    - thermodynamics variables (temperature, density, R, heat capacity ratio, ...)
    - particles (either fluid particles or fixed particles)
    - state equation between pressure and density (ideal gaz law or quasi incompressible fluid)
    - initial density (either same density for all fluid particles either density respecing hydrostatic law)

The particles can be generated by the use of "parallelipepidic bunch of particles" (rectangle full of particles) where the width, heigh and lengh of the rectangle can be modified (it can become a simple wall with a unitary thickness).

Here is an example of .json file used:

```json
{

  "domain":{
    "matrix_long" : [[1, 1, 1]],
    "matrix_orig" : [[0.5, 0.5, 0.5]],
    "vector_type" : [1],
    "L_d": [2, 2, 2],
    "o_d": [0.0, 0.0, 0.0]
  },

  "post_process":{
    "do": true,
    "xyz_init": [0, 0, 0.75],
    "xyz_end": [2.8, 2.8, 0.75]
  },

  "simulation":{
    "theta" :0.5,
    "s": 0.05,
    "nstepT": 30000,
    "dt": 0.00001,
    "nsave": 100,
    "kappa": 2,
    "alpha": 0.5,
    "beta": 0,
    "alpha_st":10
  },

  "thermo":{
    "rho_0": 1000,
    "rho_moving": 1000,
    "rho_fixed" : 1000,
    "T": 298.15,
    "u_init": [0.0, 0.0, 0.0],
    "c_0": 340, 
    "gamma": 7, 
    "M": 18e-3, 
    "R":8.314
  },

  
  "forces":{
    "gravity":false,
    "surface_tension":true,
    "adhesion":false
  },

  "condition":{
    "print_debug":false,
    "schemeIntegration": {"Euler":true,"RK22":false},
    "stateEquation" : {"Ideal gaz law":false, "Quasi incompresible fluid":true},
    "initialCondition" : {"Hydrostatic":false, "Constant":true}
  }
}

```
### Launch simulation

Once everything is ready, one can run the code by the following code line:
    ```solver.exe ../../tests/surface_tension/cube_to_sphere.json```

In the example above, a cube of fluid particles inside a box is subjected to gravity:
![Test GIF](output/boite_s_0_01.gif)

Another example is a single cube of fluid particles is created "in the void" and surface tensions will be applied to it. Thus this cube will become a sphere after a short period of time as can be seen on the video below:
![Test GIF](output/good_sim_ihopeso.gif)



### Analyse simulation

The results of the particles variables (position, velocity, pressure, density, speed of sound, number of neighbours, ...) can be visuallized using either Paraview (for nice spatial view) or our python scripts (which are simply reading **.csv** files created during the simulation).

A CONTINUER

Once the simulation is done, one may analyse the result using either 


